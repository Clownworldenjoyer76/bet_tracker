<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DK Text → CSV</title>
</head>
<body>

<h2>DraftKings Text → CSV</h2>

<label>League</label><br>
<select id="league">
  <option value="">-- select --</option>
  <option value="nhl">nhl</option>
  <option value="nba">nba</option>
  <option value="ncaab">ncaab</option>
  <option value="soc">soc</option>
</select><br><br>

<label>GitHub Token (classic PAT)</label><br>
<input type="password" id="token"><br><br>

<label>Raw DK Text</label><br>
<textarea id="raw" rows="18" cols="80"></textarea><br><br>

<button onclick="run()">Generate CSV</button>

<pre id="out"></pre>

<script>
const owner = "Clownworldenjoyer76";
const repo  = "bet_tracker";
const workflowFile = "dk_text_to_csv.yml";

async function run() {
  const league = document.getElementById("league").value;
  const token  = document.getElementById("token").value.trim();
  const raw    = document.getElementById("raw").value;
  const out    = document.getElementById("out");

  if (!league || !token || !raw) {
    alert("Missing input");
    return;
  }

  const res = await fetch(
    `https://api.github.com/repos/${owner}/${repo}/actions/workflows/${workflowFile}/dispatches`,
    {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${token}`,
        "Accept": "application/vnd.github+json"
      },
      body: JSON.stringify({
        ref: "main",
        inputs: {
          league: league,
          raw_text: raw
        }
      })
    }
  );

  out.textContent = `status: ${res.status}`;
}
</script>

</body>
</html>
